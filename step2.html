<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Étape 2 - Le cryptide du Nil</title>
    <link rel="stylesheet" href="src/styles/styles.css" />
    <script src="src/scripts/scripts.js" defer></script>
  </head>
  <body>
    <header>
      <nav>
        <ul>
          <li><a id="step1-link" href="index.html">1</a></li>
          <li>
            <a id="step2-link" role="link" aria-disabled="true"
              ><img src="src/icons/lock-solid.svg" alt="cadenas"
            /></a>
          </li>
          <li>
            <a id="step3-link" role="link" aria-disabled="true"
              ><img src="src/icons/lock-solid.svg" alt="cadenas"
            /></a>
          </li>
          <li>
            <a id="step4-link" role="link" aria-disabled="true"
              ><img src="src/icons/lock-solid.svg" alt="cadenas"
            /></a>
          </li>
          <li>
            <a id="step5-link" role="link" aria-disabled="true"
              ><img src="src/icons/lock-solid.svg" alt="cadenas"
            /></a>
          </li>
        </ul>
      </nav>
    </header>

    <main>
      <h1>Étape 2 - Le cryptide du Nil</h1>
      <p>Résolvez l'énigme suivante pour révéler un nouvel indice !</p>
    </main>

    <!-- Popup pour le mot de passe -->
    <div id="password-popup" style="display: none">
      <form id="password-form">
        <label for="password">Entrez le mot de passe :</label>
        <input type="password" id="password" name="password" />
        <button type="submit">Valider</button>
      </form>
      <p id="error-message" style="color: red; display: none">
        Mot de passe incorrect
      </p>
    </div>

    <footer></footer>

    <script>
      // Vérifie si l'étape est déverrouillée
      if (!localStorage.getItem("step2-unlocked")) {
        document.getElementById("password-popup").style.display = "block";

        document
          .getElementById("password-form")
          .addEventListener("submit", function (e) {
            e.preventDefault();
            const password = document.getElementById("password").value;
            if (password === "elephant") {
              localStorage.setItem("step2-unlocked", true);
              document.getElementById("password-popup").style.display = "none";
              document.getElementById("step2-link").href = "step2.html";
              alert("Étape déverrouillée !");
            } else {
              document.getElementById("error-message").style.display = "block";
            }
          });
      } else {
        document.getElementById("step2-link").href = "step2.html";
      }
    </script>
  </body>
</html>
